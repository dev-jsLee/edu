<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìë£Œ ë³´ê¸° - Python í•™ìŠµ í”Œë«í¼</title>
    <link rel="stylesheet" href="/static/css/common.css">
    <link rel="stylesheet" href="/static/css/materials.css">
</head>
<body>
    <nav>
        <div class="container">
            <a href="/" class="logo">ğŸ Python í•™ìŠµ</a>
            <ul>
                <li><a href="/">í™ˆ</a></li>
                <li><a href="/materials">ìˆ˜ì—… ìë£Œ</a></li>
                <li><a href="/practice">ë¬¸ì œ í’€ì´</a></li>
                <li><a href="/profile/history">ë‚´ ê¸°ë¡</a></li>
                <li id="auth-nav"></li>
            </ul>
        </div>
    </nav>

    <div class="container" style="padding: 2rem 0;">
        <a href="/materials" class="btn btn-secondary mb-2">â† ëª©ë¡ìœ¼ë¡œ</a>
        
        <div id="error-message" class="alert alert-error"></div>
        <div id="loader" class="loader"></div>
        <div id="material-detail"></div>
    </div>

    <script src="/static/js/utils.js"></script>
    <script src="/static/js/api.js"></script>
    <script src="/static/js/materials.js"></script>
    <script>
        // ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ ì„¤ì •
        const authNav = document.getElementById('auth-nav');
        if (isLoggedIn()) {
            const user = getCurrentUser();
            authNav.innerHTML = `
                <span style="color: white; margin-right: 1rem;">ğŸ‘¤ ${escapeHtml(user.username)}</span>
                <a href="#" onclick="AuthAPI.logout(); return false;">ë¡œê·¸ì•„ì›ƒ</a>
            `;
        } else {
            authNav.innerHTML = '<a href="/login">ë¡œê·¸ì¸</a>';
        }

        // URLì—ì„œ ìë£Œ ID ì¶”ì¶œ
        const pathParts = window.location.pathname.split('/');
        const materialId = parseInt(pathParts[pathParts.length - 1]);

        if (materialId) {
            loadMaterialDetail(materialId);
        } else {
            showError('ì˜ëª»ëœ ìë£Œ IDì…ë‹ˆë‹¤');
        }
    </script>
</body>
</html>

