<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¬¸ì œ í’€ê¸° - Python í•™ìŠµ í”Œë«í¼</title>
    <link rel="stylesheet" href="/static/css/common.css">
    <link rel="stylesheet" href="/static/css/practice.css">
</head>
<body>
    <nav>
        <div class="container">
            <a href="/" class="logo">ğŸ Python í•™ìŠµ</a>
            <ul>
                <li><a href="/">í™ˆ</a></li>
                <li><a href="/materials">ìˆ˜ì—… ìë£Œ</a></li>
                <li><a href="/practice">ë¬¸ì œ í’€ì´</a></li>
                <li><a href="/profile/history">ë‚´ ê¸°ë¡</a></li>
                <li id="auth-nav"></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <div id="error-message" class="alert alert-error"></div>
        <div id="success-message" class="alert alert-success"></div>
        
        <div class="practice-container">
            <!-- ë¬¸ì œ ì„¹ì…˜ -->
            <div class="problem-section">
                <div class="problem-header">
                    <a href="/practice" class="btn btn-secondary mb-2">â† ë¬¸ì œ ëª©ë¡</a>
                    <h2 id="problem-title">ë¬¸ì œ ë¡œë”© ì¤‘...</h2>
                </div>
                <div id="problem-content" class="problem-description">
                    <!-- ë¬¸ì œ ë‚´ìš©ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
                </div>
            </div>

            <!-- ì½”ë“œ ì—ë””í„° ì„¹ì…˜ -->
            <div class="editor-section">
                <h3>ì½”ë“œ ì‘ì„±</h3>
                
                <div class="code-editor">
                    <textarea 
                        id="code-editor" 
                        class="form-input" 
                        placeholder="ì—¬ê¸°ì— Python ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”..."
                    ># ì—¬ê¸°ì— ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”
print("Hello, World!")</textarea>
                </div>

                <div class="editor-actions">
                    <button 
                        class="btn btn-primary" 
                        id="run-btn" 
                        onclick="executeCode()"
                        data-original-text="ì‹¤í–‰"
                    >
                        â–¶ ì‹¤í–‰
                    </button>
                    <button 
                        class="btn btn-success" 
                        id="submit-btn" 
                        onclick="submitCode()"
                        data-original-text="ì œì¶œ"
                    >
                        âœ“ ì œì¶œ
                    </button>
                </div>

                <div class="output-section">
                    <div class="output-header">
                        <h3>ì‹¤í–‰ ê²°ê³¼</h3>
                        <span id="execution-time" class="execution-time"></span>
                    </div>
                    <div id="output-content" class="output-content">
ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë©´ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="loader" class="loader"></div>

    <script src="/static/js/utils.js"></script>
    <script src="/static/js/api.js"></script>
    <script src="/static/js/practice.js"></script>
    <script>
        // ë¡œê·¸ì¸ í•„ìˆ˜
        if (!requireLogin()) {
            // requireLoginì´ falseë¥¼ ë°˜í™˜í•˜ë©´ ì´ë¯¸ ë¦¬ë‹¤ì´ë ‰íŠ¸ë¨
        }

        // ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ ì„¤ì •
        const authNav = document.getElementById('auth-nav');
        if (isLoggedIn()) {
            const user = getCurrentUser();
            authNav.innerHTML = `
                <span style="color: white; margin-right: 1rem;">ğŸ‘¤ ${escapeHtml(user.username)}</span>
                <a href="#" onclick="AuthAPI.logout(); return false;">ë¡œê·¸ì•„ì›ƒ</a>
            `;
        }

        // URLì—ì„œ ë¬¸ì œ ID ì¶”ì¶œ
        const pathParts = window.location.pathname.split('/');
        currentProblemId = parseInt(pathParts[pathParts.length - 1]);

        // ë¬¸ì œ ë‚´ìš© ë¡œë“œ (ë°ëª¨ìš© í•˜ë“œì½”ë”©)
        const problems = {
            1: {
                title: 'ë¬¸ì œ 1: Hello World ì¶œë ¥í•˜ê¸°',
                content: `
                    <p><strong>ë¬¸ì œ ì„¤ëª…:</strong></p>
                    <p>"Hello, World!"ë¥¼ ì¶œë ¥í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ì„¸ìš”.</p>
                    
                    <div class="problem-examples">
                        <div class="example">
                            <h4>ì˜ˆì œ ì¶œë ¥</h4>
                            <pre>Hello, World!</pre>
                        </div>
                    </div>
                `,
                starter: '# ì—¬ê¸°ì— ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”\nprint("Hello, World!")'
            },
            2: {
                title: 'ë¬¸ì œ 2: ë‘ ìˆ˜ì˜ í•©',
                content: `
                    <p><strong>ë¬¸ì œ ì„¤ëª…:</strong></p>
                    <p>ë‘ ì •ìˆ˜ aì™€ bë¥¼ ì…ë ¥ë°›ì•„ í•©ì„ ì¶œë ¥í•˜ì„¸ìš”.</p>
                    
                    <div class="problem-examples">
                        <div class="example">
                            <h4>ì˜ˆì œ</h4>
                            <pre>a = 3
b = 5
print(a + b)  # 8</pre>
                        </div>
                    </div>
                `,
                starter: '# ë‘ ìˆ˜ë¥¼ ì •ì˜í•˜ê³  í•©ì„ ì¶œë ¥í•˜ì„¸ìš”\na = 3\nb = 5\n# ì—¬ê¸°ì— ì½”ë“œ ì‘ì„±'
            },
            3: {
                title: 'ë¬¸ì œ 3: ë¦¬ìŠ¤íŠ¸ í•©ê³„',
                content: `
                    <p><strong>ë¬¸ì œ ì„¤ëª…:</strong></p>
                    <p>ë¦¬ìŠ¤íŠ¸ì˜ ëª¨ë“  ìš”ì†Œì˜ í•©ì„ êµ¬í•˜ëŠ” í•¨ìˆ˜ sum_listë¥¼ ì‘ì„±í•˜ì„¸ìš”.</p>
                    
                    <div class="problem-examples">
                        <div class="example">
                            <h4>ì˜ˆì œ</h4>
                            <pre>def sum_list(numbers):
    # ì—¬ê¸°ì— ì½”ë“œ ì‘ì„±
    pass

print(sum_list([1, 2, 3, 4, 5]))  # 15</pre>
                        </div>
                    </div>
                `,
                starter: 'def sum_list(numbers):\n    # ì—¬ê¸°ì— ì½”ë“œ ì‘ì„±\n    pass\n\n# í…ŒìŠ¤íŠ¸\nprint(sum_list([1, 2, 3, 4, 5]))'
            }
        };

        if (problems[currentProblemId]) {
            const problem = problems[currentProblemId];
            document.getElementById('problem-title').textContent = problem.title;
            document.getElementById('problem-content').innerHTML = problem.content;
            document.getElementById('code-editor').value = problem.starter;
        } else {
            document.getElementById('problem-title').textContent = 'ë¬¸ì œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤';
            document.getElementById('problem-content').innerHTML = '<p>í•´ë‹¹ ë¬¸ì œê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>';
        }
    </script>
</body>
</html>

